@model CarRental.Web.Models.RentalRequestViewModel
@{
    ViewData["Title"] = "Request Rental";
    var vehicle = ViewBag.Vehicle as CarRental.Domain.Entities.Vehicle;
}

<h2>Request Rental</h2>
<hr />

@if (vehicle != null)
{
    <div class="row mb-4">
        <div class="col-md-6">
            <h4>Vehicle Information</h4>
            <p><strong>Make/Model:</strong> @vehicle.Make @vehicle.Model</p>
            <p><strong>Type:</strong> @vehicle.VehicleType?.Name</p>
            <p><strong>Year:</strong> @vehicle.Year</p>
            <p><strong>Daily Rate:</strong> <span class="text-primary fw-bold">@vehicle.VehicleType?.DailyRate.ToString("C")</span></p>
        </div>
    </div>

    <form asp-action="RequestRental" method="post">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        
        <input type="hidden" asp-for="VehicleId" />

        <div class="form-group mb-3">
            <label asp-for="StartDate" class="control-label"></label>
            <input asp-for="StartDate" class="form-control" type="date" min="@DateTime.Now.ToString("yyyy-MM-dd")" />
            <span asp-validation-for="StartDate" class="text-danger"></span>
        </div>

        <div class="form-group mb-3">
            <label asp-for="EndDate" class="control-label"></label>
            <input asp-for="EndDate" class="form-control" type="date" min="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")" />
            <span asp-validation-for="EndDate" class="text-danger"></span>
        </div>

        <div class="form-group mb-3">
            <label asp-for="Notes" class="control-label">Additional Notes (Optional)</label>
            <textarea asp-for="Notes" class="form-control" rows="3"></textarea>
            <span asp-validation-for="Notes" class="text-danger"></span>
        </div>

        <div class="form-group">
            <input type="submit" value="Submit Rental Request" class="btn btn-primary" />
            <a asp-controller="Vehicles" asp-action="Index" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
}
else
{
    <div class="alert alert-danger">
        <p>Vehicle not found or not available.</p>
    </div>
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

